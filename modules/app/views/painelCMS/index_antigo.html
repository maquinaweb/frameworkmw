<!DOCTYPE html>
<html lang="pt-br">
    {head}
    <body class="fix-header fix-sidebar card-no-border mini-sidebar show-sidebar"> 
        <div class="preloader" style="display: none;">
            <svg class="circular" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle> </svg>
        </div>
        <div class="main-wrapper">
            {header}
            <!-- Left side column. contains the logo and sidebar -->
            {sidebar}

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <section class="content-header">
                    <h1>
                        {titulopagina}
                        <small>{descricao}</small>
                    </h1>
                    <ol class="breadcrumb">
                        <li><a href="{url}/painel"><i class="fa fa-home"></i> Home</a></li>
                        <li class="active">{menuprincipal}</li>
                        <li class="active">{titulopagina}</li>
                    </ol>
                </section>

                <!-- Main content -->
                <!-- BEGIN balerta -->
                <div class="box-body">
                    <div class="alert alert-{tipoalerta} alert-dismissable">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                        <h4><i class="icon {icone}"></i> {tituloalerta}</h4>
                        {mensagemalerta}
                    </div>
                </div>
                <!-- END balerta -->
                <section class="content" id="content">


                    <!-- Your Page Content Here -->
                    {content}

                </section>
                <script type="text/javascript">
                    /*
                     function adaptSize() {
                     if ($('.sidebar').height() > $('.content-wrapper').height()) {
                     $('.content-wrapper').css('min-height', $('.sidebar').height() + 'px');
                     
                     }
                     $(window).resize();
                     setTimeout(adaptSize, 500);
                     }
                     function loadAjax() {
                     $('.ajax').on('click', function (e) {
                     e.preventDefault(); // stop the browser from following the link
                     var url = $(this).attr('href');
                     $('section#content').load(url, function () {
                     loadAjax();
                     });
                     // load the html response into a DOM element
                     });
                     }
                     function initialize() {
                     $(".select2").select2();
                     
                     $(".my-colorpicker2").colorpicker();
                     
                     //Função para funcionar o select2 modal
                     $.fn.modal.Constructor.prototype.enforceFocus = function () {};
                     $('.datepicker').datepicker({
                     format: "dd/mm/yyyy",
                     lang: "pt-BR"
                     });
                     $('.select-button').click(function () {
                     //  $('<div \>').dialog({modal: true, width: "80%", title: "Select your file", zIndex: 99999,
                     $('#myModal').on('show', function () {
                     
                     });
                     $('#myModal').modal({show: true});
                     iframemodal.location = '{url}/var/plugins/elfinder/elfinder.html';
                     });
                     
                     }
                     $(document).ready(function () {
                     initialize();
                     $("#myModal").on("show.bs.modal", function (e) {
                     var link = $(e.relatedTarget);
                     $(this).find(".modal-body").load(link.attr("href"));
                     });
                     loadAjax();
                     $('.ajax2').bind('click', function (e) {
                     e.preventDefault(); // stop the browser from following the link
                     var url = $(this).attr('href');
                     var target = $(this).attr('target');
                     $('#' + target).load(url); // load the html response into a DOM element
                     });
                     starttiny();
                     if ($('.sidebar').height() < $('.content-wrapper').height()) {
                     $('.content-wrapper').css('min-height', $('.sidebar').height())
                     }
                     adaptSize();
                     
                     });
                     $(document).ajaxComplete(function () {
                     initialize();
                     starttiny();
                     });
                     
                     function elFinderBrowser(callback, value, meta) {
                     tinymce.activeEditor.windowManager.open({
                     file: '{url}/var/plugins/elfinder/elfinder_tinymce.html', // use an absolute path!
                     title: 'Arquivos',
                     width: 900,
                     height: 450,
                     resizable: 'yes'
                     }, {
                     oninsert: function (file, fm) {
                     var url, reg, info;
                     
                     // URL normalization
                     url = file.url;
                     reg = /\/[^/]+?\/\.\.\//;
                     while (url.match(reg)) {
                     url = url.replace(reg, '/');
                     }
                     
                     // Make file info
                     info = file.name + ' (' + fm.formatSize(file.size) + ')';
                     
                     // Provide file and text for the link dialog
                     if (meta.filetype == 'file') {
                     callback(url, {text: info, title: info});
                     }
                     
                     // Provide image and alt text for the image dialog
                     if (meta.filetype == 'image') {
                     callback(url, {alt: info});
                     }
                     
                     // Provide alternative source and posted for the media dialog
                     if (meta.filetype == 'media') {
                     callback(url);
                     }
                     }
                     });
                     return false;
                     }
                     
                     
                     function colocaarquivo(file, estancia) {
                     if (arquivo == '') {
                     arquivo = 'imagem';
                     }
                     document.getElementById(arquivo).value = '{url}/var/userfiles/' + file.path.replace(/\\/g, '/');
                     $('#myModal').modal('hide');
                     }
                     // TinyMCE init
                     function starttiny() {
                     tinymce.remove();
                     tinymce.init({
                     selector: ".mytextarea",
                     height: 400,
                     plugins: [
                     "advlist autolink lists link image charmap print preview hr anchor pagebreak",
                     "searchreplace wordcount visualblocks visualchars code fullscreen",
                     "insertdatetime media nonbreaking save table contextmenu directionality",
                     "emoticons template paste textcolor colorpicker textpattern"
                     ],
                     toolbar1: "insertfile undo redo | styleselect | fontselect | fontsizeselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
                     toolbar2: "print preview media | forecolor backcolor emoticons",
                     image_advtab: true,
                     templates: [
                     {title: 'Test template 1', content: 'Test 1'},
                     {title: 'Test template 2', content: 'Test 2'}
                     ],
                     relative_urls: false,
                     remove_script_host: false,
                     file_picker_callback: elFinderBrowser
                     });
                     tinymce.init({
                     selector: ".mytextarea2",
                     height: 200,
                     plugins: [
                     "advlist autolink lists link image charmap print preview hr anchor pagebreak",
                     "searchreplace wordcount visualblocks visualchars code fullscreen",
                     "insertdatetime media nonbreaking save table contextmenu directionality",
                     "emoticons template paste textcolor colorpicker textpattern"
                     ],
                     toolbar1: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
                     toolbar2: "print preview media | forecolor backcolor emoticons",
                     image_advtab: true,
                     templates: [
                     {title: 'Test template 1', content: 'Test 1'},
                     {title: 'Test template 2', content: 'Test 2'}
                     ],
                     relative_urls: false,
                     remove_script_host: false,
                     file_picker_callback: elFinderBrowser
                     });
                     var getLang = function () {
                     try {
                     var full_lng = (navigator.browserLanguage || navigator.language || navigator.userLanguage);
                     var lng = full_lng.substr(0, 2);
                     if (lng == 'ja')
                     lng = 'jp';
                     else if (lng == 'pt')
                     lng = 'pt_BR';
                     else if (lng == 'zh')
                     lng = (full_lng.substr(0, 5) == 'zh-tw') ? 'zh_TW' : 'zh_CN';
                     
                     if (lng != 'en') {
                     var script_tag = document.createElement("script");
                     script_tag.type = "text/javascript";
                     script_tag.src = "{url}/var/plugins/elfinder/js/i18n/elfinder." + lng + ".js";
                     script_tag.charset = "utf-8";
                     $("head").append(script_tag);
                     }
                     
                     return lng;
                     } catch (e) {
                     return 'en';
                     }
                     };
                     }*/


                </script>
                <!-- /.content -->
            </div><!-- /.content-wrapper -->
            <!-- Default bootstrap modal example -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!--<div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="myModalLabel">Arquivos</h4>
                        </div>-->
                        <div class="modal-body">
                            <iframe src="" width="99.6%" height="400" frameborder="0" id="iframemodal" name="iframemodal"></iframe>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Main Footer -->
            <footer class="main-footer">
                <!-- To the right -->
                <div class="pull-right hidden-xs">
                    Facilitando a sua vida.
                </div>
                <!-- Default to the left -->
                <strong>Copyright © 2020  <a href="#">Maquinaweb</a>.</strong> Todos os direitos reservados.
            </footer>
            <!-- Add the sidebar's background. This div must be placed
                 immediately after the control sidebar -->
            <div class="control-sidebar-bg"></div>
        </div><!-- ./wrapper -->
        {script}
    </body>
</html>
